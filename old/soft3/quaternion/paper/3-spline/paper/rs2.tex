\documentclass[12pt]{article} 
\usepackage{times}
\usepackage[pdftex]{graphicx}
\input{header-consecutive}

\setlength{\oddsidemargin}{0pt}
\setlength{\topmargin}{0in}
\setlength{\textheight}{8.6in}
\setlength{\textwidth}{6.875in}
\setlength{\columnsep}{5mm}
% \markright{Sweeping frustra (\today) \hfill}
% \pagestyle{myheadings}

% -----------------------------------------------------------------------------
\title{Tech report 2: Sweeping view frustra along rational motions: blind motion planning}
% Johnstone and Williams
\begin{document}
\maketitle

\begin{abstract}
Think camera control in CSI, Las Vegas, Smallville, Final Fantasy.
Think automated motion planning through a virtual scene.
\end{abstract}

\section{Rational camera control}

Consider the following camera control problem.
Given certain desired viewpoints for a camera, we are to move the camera through the scene
so that it hits these predefined cues.
Suppose that the camera path is designed as if the motion is in free space,
which is a much simpler motion plan.
As the camera moves along the computed path, it will collide with the scene (i.e., the
view will cut through some of the scene).
We want to detect these camera collisions (and eventually correct them).

% Application: camera control through a scene, given certain desired viewpoints.
%    i.e., you specify certain viewpoints in a scene from which to build a flythrough
%    that hits certain cues.
% Issue: camera is not an object like typical animations;
%        however, orientation is a key input to a camera, and collision is well defined:
% Source of positions: camera viewpoints at hit points.
% Source of orientations: camera viewpoints at hit points.

This camera collision detection problem is formalized as follows.
       position is the center of the back of the frustrum;
       orientation is the normal to the frustrum's back plane;
       a bad camera configuration is one whose back plane of the viewing frustrum 
       intersects the scene (the side planes will almost always do so, with no
       ill effects).
       Only have to keep track of back plane of view frustrum: this makes possible
       a swept envelope approach, as follows.
Consider the back plane of the view frustrum moving through space with a moving camera.
We are interested in its intersections with the scene, which reflect ugly cutthroughs
of the scene in the rendering of the flythrough.
The four edges of the quadrilateral defining the back plane define four ruled surfaces
as they sweep through space.
These are rational ruled surfaces when the motion is rational.
We could consider the intersection of these four ruled surfaces with the scene,
but we can simplify further.
Suppose that the back plane of the view frustrum starts out in a free position,
not intersecting the scene.
Then one of its line segments can intersect the scene if and only if one of its vertices
(an endpoint of the line segment) intersects the scene.
Moreover, the vertex intersection detects the initial collision.
Therefore, it is sufficient to test the intersection of the four vertex curves
(the four rational curves defined by the motion of the four vertices of the back plane
of the view frustrum) with the scene.
Intersection points reveal collisions where the motion must be altered.
In short, a camera path is safe iff the 4 rational endcurves of its view frustrum
backplane do not intersect the scene (where the camera starts out safe).

% WE NEED RULED SURFACE INTERSECTION?: 
Since a scene object could interfere with a frustrum edge without
interfering with a frustrum vertex, we must compute the intersection of the moving edge
not the moving vertex, and hence the intersection of a ruled surface with the scene
rather than a curve with the scene.
% Therefore, think of ruled surface intersection methods.

Initial challenges:
\begin{itemize}
\item find realistic hit points;
      how close do they have to be to allow dumb interpolation rather than
      smart motion planning?
\item find 4 rational endcurves of view frustrum from position/orientation 
\item verify that motions generated from these keyframes are locally perturbable
      to collision-free motions
\end{itemize}

Another interpretation of this paper: DUMB OR BLIND MOTION PLANNING (this 
strongly motivates rational motion).
Collision detection using the rational swept volumes generated by the rational motions;
this would be a 'blind' replacement of the keen-sighted, or general, motion planner 
proposed below, which incorporates the environment into its planning;
dumb or blind in the sense that a motion is generated (with no knowledge of obstacles)
and tested for collision, then regenerated
based on the found collision and retested, etc.;  it is a valid strategy for local
motions that are not expected to require large adjustments; the global motion, at a
crude level, would be built by a different planner.
% A rational motion is defined for a rigid object by interpolating 
% positions/orientations; these orientations are found how?

\section{Followup paper}

How should the motion be altered when a collision is detected?
Once a collision is detected, there are several options to correct the motion.
As a first crack, assume that a small perturbation will correct the motion:
that is, the distance of our present path from a safe path is small.
If a collision is detected between keyframes i and i+1, we could perturb i,
we could perturb i+1, or we could add a new keyframe local to the collision.
We prefer the latter option, but there are various options here.
We will start by using the first collision only, and move perpendicular to the
present curve's tangent at this collision, which seems to correct in the best
direction to avoid a collision (we don't want to move in the present tangent direction).
The direction in this normal plane could be determined using which vertex of the four
back vertices has intersected: we could move within the normal plane 
towards the nonintersecting vertices.  
Alternatively, we could intersect the entire backplane quadrilateral with the scene
and determine a motion in this plane of the quadrilateral (which is also the normal plane)
that is guaranteed to remove collision.
Experiments with these approaches are necessary.

Flowchart: generation of flythrough -> collision detection -> path correction.
We could generate better paths by forcing paths down center of halls by shrinking
the corridors inward a set amount.  This shrinking could be removed if the path
correction gets too difficult.

\section{Future papers}

\begin{itemize}
\item Orientation planning with orientation constraints on camera.

Equivalently, ACTIVE ORIENTATION OBSTACLES.
Design of quaternion splines that avoid active orientation obstacles
(and the definition of these orientation obstacles using quaternion splines);
an active orientation obstacle is an obstacle based on the movement of the robot,
not on the environment, such as not spilling milk;

\item high level motion algorithm (decomposition of scene into cells)

\item PASSIVE ORIENTATION OBSTACLES AND INTELLIGENT PLANNING.
Generation of collision-free motions, using
passive orientation obstacles defined by the environment; this is harder
and would solve a problem mentioned way back in Lozano-Perez.

\item camera or object paths that are sensitive to the visibility structure of the scene
\item camera paths that remain invisible to a certain light or object
\item camera paths that keep a certain object visible
\end{itemize}

Ross reading:
\begin{itemize}
\item my quaternion spline papers
\item * my Bezier curve software
\item Bezier intersection papers, ruled surface intersection paper
\item rational Bezier
\item * introduction to robot motion (Latombe)
\item give me game design examples, TV examples
\item * build more architectural flythroughs
\item what underlying data structure to store the scene?
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}

\end{document}
